{
    PartialType {
        ident: "LayerConfig",
        docs: [
            " mirrord allows for a high degree of customization when it comes to which features you want to\n",
            " enable, and how they should function.\n",
            "\n",
            " All of the configuration fields have a default value, so a minimal configuration would be no\n",
            " configuration at all.\n",
            "\n",
            " To help you get started, here are examples of a basic configuration file, and a complete\n",
            " configuration file containing all fields.\n",
            "\n",
            " ### Basic `config.json` {#root-basic}\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"target\": \"pod/bear-pod\",\n",
            "   \"feature\": {\n",
            "     \"env\": true,\n",
            "     \"fs\": \"read\",\n",
            "     \"network\": true\n",
            "   }\n",
            " }\n",
            " ```\n",
            "\n",
            " ### Complete `config.json` {#root-complete}\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"accept_invalid_certificates\": false,\n",
            "   \"skip_processes\": \"ide-debugger\",\n",
            "   \"target\": {\n",
            "     \"path\": \"pod/bear-pod\",\n",
            "     \"namespace\": \"default\"\n",
            "   },\n",
            "   \"connect_tcp\": null,\n",
            "   \"agent\": {\n",
            "     \"log_level\": \"info\",\n",
            "     \"namespace\": \"default\",\n",
            "     \"image\": \"ghcr.io/metalbear-co/mirrord:latest\",\n",
            "     \"image_pull_policy\": \"IfNotPresent\",\n",
            "     \"image_pull_secrets\": [ { \"secret-key\": \"secret\" } ],\n",
            "     \"ttl\": 30,\n",
            "     \"ephemeral\": false,\n",
            "     \"communication_timeout\": 30,\n",
            "     \"startup_timeout\": 360,\n",
            "     \"network_interface\": \"eth0\",\n",
            "     \"pause\": false,\n",
            "     \"flush_connections\": true\n",
            "   },\n",
            "   \"feature\": {\n",
            "     \"env\": {\n",
            "       \"include\": \"DATABASE_USER;PUBLIC_ENV\",\n",
            "       \"exclude\": \"DATABASE_PASSWORD;SECRET_ENV\",\n",
            "       \"overrides\": {\n",
            "         \"DATABASE_CONNECTION\": \"db://localhost:7777/my-db\",\n",
            "         \"LOCAL_BEAR\": \"panda\"\n",
            "       }\n",
            "     },\n",
            "     \"fs\": {\n",
            "       \"mode\": \"write\",\n",
            "       \"read_write\": \".+\\.json\" ,\n",
            "       \"read_only\": [ \".+\\.yaml\", \".+important-file\\.txt\" ],\n",
            "       \"local\": [ \".+\\.js\", \".+\\.mjs\" ]\n",
            "     },\n",
            "     \"network\": {\n",
            "       \"incoming\": {\n",
            "         \"mode\": \"steal\",\n",
            "         \"http_header_filter\": {\n",
            "           \"filter\": \"host: api\\..+\",\n",
            "           \"ports\": [80, 8080]\n",
            "         },\n",
            "         \"port_mapping\": [[ 7777, 8888 ]],\n",
            "         \"ignore_localhost\": false,\n",
            "         \"ignore_ports\": [9999, 10000]\n",
            "       },\n",
            "       \"outgoing\": {\n",
            "         \"tcp\": true,\n",
            "         \"udp\": true,\n",
            "         \"ignore_localhost\": false,\n",
            "         \"unix_streams\": \"bear.+\"\n",
            "       },\n",
            "       \"dns\": false\n",
            "     },\n",
            "     \"capture_error_trace\": false\n",
            "   },\n",
            "   \"operator\": true,\n",
            "   \"kubeconfig\": \"~/.kube/config\",\n",
            "   \"sip_binaries\": \"bash\"\n",
            " }\n",
            " ```\n",
            "\n",
            " # Options {#root-options}\n",
        ],
        fields: [
            PartialField {
                ident: "connect_agent_port",
                ty: "u16",
                docs: [
                    " <!--${internal}-->\n",
                    "\n",
                    " ## connect_agent_port {#root-connect_agent_port}\n",
                    "\n",
                    " Agent listen port that already exists that we can connect to.\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "   \"connect_agent_port\": \"8888\"\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "pause",
                ty: "bool",
                docs: [
                    " ## pause {#root-pause}\n",
                    "\n",
                    " Controls target pause feature. Unstable.\n",
                    "\n",
                    " With this feature enabled, the remote container is paused while this layer is connected to\n",
                    " the agent.\n",
                    "\n",
                    " Defaults to `false`.\n",
                ],
            },
            PartialField {
                ident: "operator",
                ty: "bool",
                docs: [
                    " ## operator {#root-operator}\n",
                    "\n",
                    " Allow to lookup if operator is installed on cluster and use it.\n",
                    "\n",
                    " Defaults to `true`.\n",
                ],
            },
            PartialField {
                ident: "accept_invalid_certificates",
                ty: "bool",
                docs: [
                    " ## accept_invalid_certificates {#root-accept_invalid_certificates}\n",
                    "\n",
                    " Controls whether or not mirrord accepts invalid TLS certificates (e.g. self-signed\n",
                    " certificates).\n",
                    "\n",
                    " Defaults to `false`.\n",
                ],
            },
            PartialField {
                ident: "connect_agent_name",
                ty: "String",
                docs: [
                    " <!--${internal}-->\n",
                    "\n",
                    " ## connect_agent_name {#root-connect_agent_name}\n",
                    "\n",
                    " Agent name that already exists that we can connect to.\n",
                    "\n",
                    " Keep in mind that the intention here is to allow reusing a long living mirrord-agent pod,\n",
                    " and **not** to connect multiple (simultaneos) mirrord instances to a single\n",
                    " mirrord-agent, as the later is not properly supported without the use of\n",
                    " [mirrord-operator](https://metalbear.co/#waitlist-form).\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "   \"connect_agent_name\": \"mirrord-agent-still-alive\"\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "sip_binaries",
                ty: "String",
                docs: [
                    " ## sip_binaries {#root-sip_binaries}\n",
                    "\n",
                    " Binaries to patch (macOS SIP).\n",
                    "\n",
                    " Use this when mirrord isn't loaded to protected binaries that weren't automatically\n",
                    " patched.\n",
                    "\n",
                    " Runs `endswith` on the binary path (so `bash` would apply to any binary ending with `bash`\n",
                    " while `/usr/bin/bash` would apply only for that binary).\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "  \"sip_binaries\": \"bash;python\"\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "skip_processes",
                ty: "String",
                docs: [
                    " ## skip_processes {#root-skip_processes}\n",
                    "\n",
                    " Allows mirrord to skip unwanted processes.\n",
                    "\n",
                    " Useful when process A spawns process B, and the user wants mirrord to operate only on\n",
                    " process B.\n",
                    " Accepts a single value, or multiple values separated by `;`.\n",
                    "\n",
                    "```json\n",
                    " {\n",
                    "  \"skip_processes\": \"bash;node\"\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "connect_tcp",
                ty: "String",
                docs: [
                    " ## connect_tcp {#root-connect_tpc}\n",
                    "\n",
                    " IP:PORT to connect to instead of using k8s api, for testing purposes.\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "   \"connect_tcp\": \"10.10.0.100:7777\"\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "kubeconfig",
                ty: "String",
                docs: [
                    " ## kubeconfig {#root-kubeconfig}\n",
                    "\n",
                    " Path to a kubeconfig file, if not specified, will use `KUBECONFIG`, or `~/.kube/config`, or\n",
                    " the in-cluster config.\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "  \"kubeconfig\": \"~/bear/kube-config\"\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "agent",
                ty: "AgentConfig",
                docs: [
                    " ## agent {#root-agent}\n",
                ],
            },
            PartialField {
                ident: "target",
                ty: "TargetConfig",
                docs: [
                    " ## target {#root-target}\n",
                ],
            },
            PartialField {
                ident: "feature",
                ty: "FeatureConfig",
                docs: [
                    " # feature {#root-feature}\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "TargetConfig",
        docs: [
            " Specifies the target and namespace to mirror, see [`path`](#target-path) for a list of\n",
            " accepted values for the `target` option.\n",
            "\n",
            " The simplified configuration supports:\n",
            "\n",
            " - `pod/{sample-pod}/[container]/{sample-container}`;\n",
            " - `podname/{sample-pod}/[container]/{sample-container}`;\n",
            " - `deployment/{sample-deployment}/[container]/{sample-container}`;\n",
            "\n",
            " Shortened setup:\n",
            "\n",
            "```json\n",
            " {\n",
            "  \"target\": \"pod/bear-pod\"\n",
            " }\n",
            " ```\n",
            "\n",
            " Complete setup:\n",
            "\n",
            " ```json\n",
            " {\n",
            "  \"target\": {\n",
            "    \"path\": {\n",
            "      \"pod\": \"bear-pod\"\n",
            "    },\n",
            "    \"namespace\": \"default\"\n",
            "  }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "path",
                ty: "Target",
                docs: [
                    " ### target.path {#target-path}\n",
                    "\n",
                    " Specifies the running pod (or deployment) to mirror.\n",
                    "\n",
                    " Supports:\n",
                    " - `pod/{sample-pod}`;\n",
                    " - `podname/{sample-pod}`;\n",
                    " - `deployment/{sample-deployment}`;\n",
                    " - `container/{sample-container}`;\n",
                    " - `containername/{sample-container}`.\n",
                ],
            },
            PartialField {
                ident: "namespace",
                ty: "String",
                docs: [
                    " ### target.namespace {#target-namespace}\n",
                    "\n",
                    " Namespace where the target lives.\n",
                    "\n",
                    " Defaults to `\"default\"`.\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "FeatureConfig",
        docs: [
            " Controls mirrord features.\n",
            "\n",
            " See the\n",
            " [technical reference, Technical Reference](https://mirrord.dev/docs/reference/)\n",
            " to learn more about what each feature does.\n",
            "\n",
            " The [`env`](#feature-env), [`fs`](#feature-fs) and [`network`](#feature-network) options\n",
            " have support for a shortened version, that you can see [here](#root-shortened).\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"env\": {\n",
            "       \"include\": \"DATABASE_USER;PUBLIC_ENV\",\n",
            "       \"exclude\": \"DATABASE_PASSWORD;SECRET_ENV\",\n",
            "       \"overrides\": {\n",
            "         \"DATABASE_CONNECTION\": \"db://localhost:7777/my-db\",\n",
            "         \"LOCAL_BEAR\": \"panda\"\n",
            "       }\n",
            "     },\n",
            "     \"fs\": {\n",
            "       \"mode\": \"write\",\n",
            "       \"read_write\": \".+\\.json\" ,\n",
            "       \"read_only\": [ \".+\\.yaml\", \".+important-file\\.txt\" ],\n",
            "       \"local\": [ \".+\\.js\", \".+\\.mjs\" ]\n",
            "     },\n",
            "     \"network\": {\n",
            "       \"incoming\": {\n",
            "         \"mode\": \"steal\",\n",
            "         \"http_header_filter\": {\n",
            "           \"filter\": \"host: api\\..+\",\n",
            "           \"ports\": [80, 8080]\n",
            "         },\n",
            "         \"port_mapping\": [[ 7777, 8888 ]],\n",
            "         \"ignore_localhost\": false,\n",
            "         \"ignore_ports\": [9999, 10000]\n",
            "       },\n",
            "       \"outgoing\": {\n",
            "         \"tcp\": true,\n",
            "         \"udp\": true,\n",
            "         \"ignore_localhost\": false,\n",
            "         \"unix_streams\": \"bear.+\"\n",
            "       },\n",
            "       \"dns\": false\n",
            "     },\n",
            "     \"capture_error_trace\": false\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "capture_error_trace",
                ty: "bool",
                docs: [
                    " ## feature.capture_error_trace {#feature-capture_error_trace}\n",
                    "\n",
                    " Controls the crash reporting feature.\n",
                    "\n",
                    " With this feature enabled, mirrord generates a nice crash report log.\n",
                    "\n",
                    " Defaults to `false`.\n",
                ],
            },
            PartialField {
                ident: "fs",
                ty: "FsConfig",
                docs: [
                    " ## feature.fs {#feature-fs}\n",
                ],
            },
            PartialField {
                ident: "env",
                ty: "EnvConfig",
                docs: [
                    " ## feature.env {#feature-env}\n",
                ],
            },
            PartialField {
                ident: "network",
                ty: "NetworkConfig",
                docs: [
                    " ## feature.network {#feature-network}\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "NetworkConfig",
        docs: [
            " Controls mirrord network operations.\n",
            "\n",
            " See the network traffic [reference](https://mirrord.dev/docs/reference/traffic/)\n",
            " for more details.\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"network\": {\n",
            "       \"incoming\": {\n",
            "         \"mode\": \"steal\",\n",
            "         \"http_header_filter\": {\n",
            "           \"filter\": \"host: api\\..+\",\n",
            "           \"ports\": [80, 8080]\n",
            "         },\n",
            "         \"port_mapping\": [[ 7777, 8888 ]],\n",
            "         \"ignore_localhost\": false,\n",
            "         \"ignore_ports\": [9999, 10000]\n",
            "       },\n",
            "       \"outgoing\": {\n",
            "         \"tcp\": true,\n",
            "         \"udp\": true,\n",
            "         \"ignore_localhost\": false,\n",
            "         \"unix_streams\": \"bear.+\"\n",
            "       },\n",
            "       \"dns\": false\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "dns",
                ty: "bool",
                docs: [
                    " ### feature.network.dns {#feature-network-dns}\n",
                    "\n",
                    " Resolve DNS via the remote pod.\n",
                    "\n",
                    " Defaults to `true`.\n",
                ],
            },
            PartialField {
                ident: "incoming",
                ty: "IncomingConfig",
                docs: [
                    " ### feature.network.incoming {#feature-network-incoming}\n",
                ],
            },
            PartialField {
                ident: "outgoing",
                ty: "OutgoingConfig",
                docs: [
                    " ### feature.network.outgoing {#feature-network-outgoing}\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "OutgoingConfig",
        docs: [
            " Tunnel outgoing network operations through mirrord.\n",
            "\n",
            " See the outgoing [reference](https://mirrord.dev/docs/reference/traffic/#outgoing) for more\n",
            " details.\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"network\": {\n",
            "       \"outgoing\": {\n",
            "         \"tcp\": true,\n",
            "         \"udp\": true,\n",
            "         \"ignore_localhost\": false,\n",
            "         \"unix_streams\": \"bear.+\"\n",
            "       }\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "tcp",
                ty: "bool",
                docs: [
                    " #### feature.network.outgoing.tcp {#feature.network.outgoing.tcp}\n",
                    "\n",
                    " Defaults to `true`.\n",
                ],
            },
            PartialField {
                ident: "udp",
                ty: "bool",
                docs: [
                    " #### feature.network.outgoing.udp {#feature.network.outgoing.udp}\n",
                    "\n",
                    " Defaults to `true`.\n",
                ],
            },
            PartialField {
                ident: "ignore_localhost",
                ty: "bool",
                docs: [
                    " #### feature.network.outgoing.ignore_localhost {#feature.network.outgoing.ignore_localhost}\n",
                    "\n",
                    " Defaults to `false`.\n",
                ],
            },
            PartialField {
                ident: "unix_streams",
                ty: "String",
                docs: [
                    " #### feature.network.outgoing.unix_streams {#feature.network.outgoing.unix_streams}\n",
                    "\n",
                    " Connect to these unix streams remotely (and to all other paths locally).\n",
                    "\n",
                    " You can either specify a single value or an array of values.\n",
                    " Each value is interpreted as a regular expression\n",
                    " ([Supported Syntax](https://docs.rs/regex/1.7.1/regex/index.html#syntax)).\n",
                    "\n",
                    " When your application connects to a unix socket, the target address will be converted to a\n",
                    " string (non-utf8 bytes are replaced by a placeholder character) and matched against the set\n",
                    " of regexes specified here. If there is a match, mirrord will connect your application with\n",
                    " the target unix socket address on the target pod. Otherwise, it will leave the connection\n",
                    " to happen locally on your machine.\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "IncomingConfig",
        docs: [
            " Controls the incoming TCP traffic feature.\n",
            "\n",
            " See the incoming [reference](https://mirrord.dev/docs/reference/traffic/#incoming) for more\n",
            " details.\n",
            "\n",
            " Incoming traffic supports 2 modes of operation:\n",
            "\n",
            " 1. Mirror (**default**): Sniffs the TCP data from a port, and forwards a copy to the interested\n",
            " listeners;\n",
            "\n",
            " 2. Steal: Captures the TCP data from a port, and forwards it to the local process, see\n",
            " [`\"mode\": \"steal\"`](#feature-network-incoming-mode);\n",
            "\n",
            " Steals all the incoming traffic:\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"network\": {\n",
            "       \"incoming\": \"steal\"\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
            "\n",
            " Steals only traffic that matches the\n",
            " [`http_header_filter`](#feature-network-incoming-http_header_filter) (steals only HTTP traffic).\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"network\": {\n",
            "       \"incoming\": {\n",
            "         \"mode\": \"steal\",\n",
            "         \"http_header_filter\": {\n",
            "           \"filter\": \"host: api\\..+\",\n",
            "           \"ports\": [80, 8080]\n",
            "         },\n",
            "         \"port_mapping\": [[ 7777, 8888 ]],\n",
            "         \"ignore_localhost\": false,\n",
            "         \"ignore_ports\": [9999, 10000]\n",
            "       }\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "ignore_ports",
                ty: "u16",
                docs: [
                    " #### feature.network.incoming.ignore_ports {#feature-network-incoming-ignore_ports}\n",
                    "\n",
                    " Ports to ignore when mirroring/stealing traffic, these ports will remain local.\n",
                    "\n",
                    " Can be especially useful when\n",
                    " [`feature.network.incoming.mode`](#feature-network-incoming-mode) is set to `\"stealer\"\n",
                    " `, and you want to avoid redirecting traffic from some ports (for example, traffic from\n",
                    " a health probe, or other heartbeat-like traffic).\n",
                ],
            },
            PartialField {
                ident: "port_mapping",
                ty: "u16",
                docs: [
                    " #### feature.network.incoming.port_mapping {#feature-network-incoming-port_mapping}\n",
                    "\n",
                    " Mapping for local ports to remote ports.\n",
                    "\n",
                    " This is useful when you want to mirror/steal a port to a different port on the remote\n",
                    " machine. For example, your local process listens on port `9333` and the container listens\n",
                    " on port `80`. You'd use `[[9333, 80]]`\n",
                ],
            },
            PartialField {
                ident: "ignore_localhost",
                ty: "bool",
                docs: [
                    " #### feature.network.incoming.ignore_localhost {#feature-network-incoming-ignore_localhost}\n",
                ],
            },
            PartialField {
                ident: "mode",
                ty: "IncomingMode",
                docs: [
                    " #### feature.network.incoming.mode {#feature-network-incoming-mode}\n",
                ],
            },
            PartialField {
                ident: "http_header_filter",
                ty: "HttpHeaderFilterConfig",
                docs: [
                    " #### feature.network.incoming.filter {#feature-network-incoming-filter}\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "IncomingAdvancedFileConfig",
        docs: [
            " ## incoming (advanced setup)\n",
            "\n",
            " Advanced user configuration for network incoming traffic.\n",
        ],
        fields: [
            PartialField {
                ident: "port_mapping",
                ty: "Vec",
                docs: [
                    " ### port_mapping\n",
                    "\n",
                    " Mapping for local ports to remote ports.\n",
                    "\n",
                    " This is useful when you want to mirror/steal a port to a different port on the remote\n",
                    " machine. For example, your local process listens on port `9333` and the container listens\n",
                    " on port `80`. You'd use `[[9333, 80]]`\n",
                ],
            },
            PartialField {
                ident: "ignore_ports",
                ty: "u16",
                docs: [
                    " ### ignore_ports\n",
                    "\n",
                    " Ports to ignore when mirroring/stealing traffic. Useful if you want specific ports to be\n",
                    " used locally only.\n",
                ],
            },
            PartialField {
                ident: "ignore_localhost",
                ty: "bool",
                docs: [
                    " ### ignore_localhost\n",
                    "\n",
                    " Consider removing when adding https://github.com/metalbear-co/mirrord/issues/702\n",
                ],
            },
            PartialField {
                ident: "mode",
                ty: "IncomingMode",
                docs: [
                    " ### mode\n",
                    "\n",
                    " Allows selecting between mirrorring or stealing traffic.\n",
                    "\n",
                    " See [`mode`](##mode (incoming)) for details.\n",
                ],
            },
            PartialField {
                ident: "http_header_filter",
                ty: "HttpHeaderFilterFileConfig",
                docs: [
                    " ### filter\n",
                    "\n",
                    " Sets up the HTTP traffic filter (currently, only useful when `incoming: steal`).\n",
                    "\n",
                    " See [`filter`](##filter) for details.\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "IncomingMode",
        docs: [
            " Allows selecting between mirrorring or stealing traffic.\n",
            "\n",
            " Can be set to either `\"mirror\"` (default) or `\"steal\"`.\n",
            "\n",
            " - `\"mirror\"`: Sniffs on TCP port, and send a copy of the data to listeners.\n",
            " - `\"steal\"`: Supports 2 modes of operation:\n",
            "\n",
            " 1. Port traffic stealing: Steals all TCP data from a\n",
            "   port, which is selected whenever the\n",
            " user listens in a TCP socket (enabling the feature is enough to make this work, no\n",
            " additional configuration is needed);\n",
            "\n",
            " 2. HTTP traffic stealing: Steals only HTTP traffic, mirrord tries to detect if the incoming\n",
            " data on a port is HTTP (in a best-effort kind of way, not guaranteed to be HTTP), and\n",
            " steals the traffic on the port if it is HTTP;\n",
        ],
        fields: [],
    },
    PartialType {
        ident: "IncomingFileConfig",
        docs: [
            " ## incoming (network)\n",
            "\n",
            " Controls the incoming TCP traffic feature.\n",
            "\n",
            " See the incoming [reference](https://mirrord.dev/docs/reference/traffic/#incoming) for more\n",
            " details.\n",
            "\n",
            " Incoming traffic supports 2 modes of operation:\n",
            "\n",
            " 1. Mirror (**default**): Sniffs the TCP data from a port, and forwards a copy to the interested\n",
            " listeners;\n",
            "\n",
            " 2. Steal: Captures the TCP data from a port, and forwards it to the local process, see\n",
            " [`steal`](##steal);\n",
            "\n",
            " ### Minimal `incoming` config\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"network\": {\n",
            "       \"incoming\": \"steal\"\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
            "\n",
            " ### Advanced `incoming` config\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"network\": {\n",
            "       \"incoming\": {\n",
            "         \"mode\": \"steal\",\n",
            "         \"http_header_filter\": {\n",
            "           \"filter\": \"host: api\\..+\",\n",
            "           \"ports\": [80, 8080]\n",
            "         },\n",
            "         \"port_mapping\": [[ 7777: 8888 ]],\n",
            "         \"ignore_localhost\": false,\n",
            "         \"ignore_ports\": [9999, 10000]\n",
            "       }\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [],
    },
    PartialType {
        ident: "HttpHeaderFilterConfig",
        docs: [
            " Filter configuration for the HTTP traffic stealer feature.\n",
            "\n",
            " Allows the user to set a filter (regex) for the HTTP headers, so that the stealer traffic\n",
            " feature only captures HTTP requests that match the specified filter, forwarding unmatched\n",
            " requests to their original destinations.\n",
            "\n",
            " Only does something when [`feature.network.incoming.mode`](#feature-network-incoming-mode) is\n",
            " set as `\"steal\"`, ignored otherwise.\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"filter\": \"host: api\\..+\",\n",
            "   \"ports\": [80, 8080]\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "filter",
                ty: "String",
                docs: [
                    " ##### feature.network.incoming.http_header_filter.filter {#feature-network-incoming-http_header_filter-filter}\n",
                    "\n",
                    " Used to match against the requests captured by the mirrord-agent pod.\n",
                    "\n",
                    " Supports regexes validated by the\n",
                    " [`fancy-regex`](https://docs.rs/fancy-regex/latest/fancy_regex/) crate.\n",
                    "\n",
                    " The HTTP traffic feature converts the HTTP headers to `HeaderKey: HeaderValue`,\n",
                    " case-insensitive.\n",
                ],
            },
            PartialField {
                ident: "ports",
                ty: "PortList",
                docs: [
                    " ##### feature.network.incoming.http_header_filter.ports {#feature-network-incoming-http_header_filter-ports}\n",
                    "\n",
                    " Activate the HTTP traffic filter only for these ports.\n",
                    "\n",
                    " Other ports will still be stolen (when `\"steal`\" is being used), they're just not checked\n",
                    " for HTTP filtering.\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "FsUserConfig",
        docs: [
            " ## feature.fs {#fs}\n",
            "\n",
            " Changes file operations behavior based on user configuration.\n",
            "\n",
            " See the file operations [reference](https://mirrord.dev/docs/reference/fileops/)\n",
            " for more details, and [fs advanced](#fs-advanced) for more information on how to fully setup\n",
            " mirrord file operations.\n",
            "\n",
            " ### Minimal `fs` config {#fs-minimal}\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"fs\": \"read\"\n",
            "   }\n",
            " }\n",
            " ```\n",
            "\n",
            " ### Advanced `fs` config {#fs-advanced}\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"fs\": {\n",
            "       \"mode\": \"write\",\n",
            "       \"read_write\": \".+\\.json\" ,\n",
            "       \"read_only\": [ \".+\\.yaml\", \".+important-file\\.txt\" ],\n",
            "       \"local\": [ \".+\\.js\", \".+\\.mjs\" ]\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [],
    },
    PartialType {
        ident: "FsConfig",
        docs: [
            " Allows the user to specify the default behavior for file operations:\n",
            "\n",
            " 1. `\"read\"` - Read from the remote file system (default)\n",
            " 2. `\"write\"` - Read/Write from the remote file system.\n",
            " 3. `\"local\"` - Read from the local file system.\n",
            " 5. `\"disable\"` - Disable file operations.\n",
            "\n",
            " Besides the default behavior, the user can specify behavior for specific regex patterns.\n",
            " Case insensitive.\n",
            "\n",
            " 1. `\"read_write\"` - List of patterns that should be read/write remotely.\n",
            " 2. `\"read_only\"` - List of patterns that should be read only remotely.\n",
            " 3. `\"local\"` - List of patterns that should be read locally.\n",
            "\n",
            " The logic for choosing the behavior is as follows:\n",
            "\n",
            " 1. Check if one of the patterns match the file path, do the corresponding action. There's\n",
            " no specified order if two lists match the same path, we will use the first one (and we\n",
            " do not guarantee what is first).\n",
            "\n",
            " **Warning**: Specifying the same path in two lists is unsupported and can lead to undefined\n",
            " behaviour.\n",
            "\n",
            " 2. Check our \"special list\" - we have an internal at compile time list\n",
            " for different behavior based on patterns to provide better UX.\n",
            "\n",
            " 3. If none of the above match, use the default behavior (mode).\n",
            "\n",
            " For more information, check the file operations\n",
            " [technical reference](https://mirrord.dev/docs/reference/fileops/).\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"fs\": {\n",
            "       \"mode\": \"write\",\n",
            "       \"read_write\": \".+\\.json\" ,\n",
            "       \"read_only\": [ \".+\\.yaml\", \".+important-file\\.txt\" ],\n",
            "       \"local\": [ \".+\\.js\", \".+\\.mjs\" ]\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "local",
                ty: "String",
                docs: [
                    " ### feature.fs.local {#feature-fs-local}\n",
                    "\n",
                    " Specify file path patterns that if matched will be opened locally.\n",
                ],
            },
            PartialField {
                ident: "read_write",
                ty: "String",
                docs: [
                    " ### feature.fs.read_write {#feature-fs-read_write}\n",
                    "\n",
                    " Specify file path patterns that if matched will be read and written to the remote.\n",
                ],
            },
            PartialField {
                ident: "read_only",
                ty: "String",
                docs: [
                    " ### feature.fs.read_only {#feature-fs-read_only}\n",
                    "\n",
                    " Specify file path patterns that if matched will be read from the remote.\n",
                    " if file matching the pattern is opened for writing or read/write it will be opened locally.\n",
                ],
            },
            PartialField {
                ident: "mode",
                ty: "FsModeConfig",
                docs: [
                    " ### feature.fs.mode {#feature-fs-mode}\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "FsModeConfig",
        docs: [
            " Configuration for enabling read-only or read-write file operations.\n",
            "\n",
            " These options are overriden by user specified overrides and mirrord default overrides.\n",
            "\n",
            " If you set [`\"localwithoverrides\"`](#feature-fs-mode-localwithoverrides) then some files\n",
            " can be read/write remotely based on our default/user specified.\n",
            " Default option for general file configuration.\n",
            "\n",
            " The accepted values are: `\"local\"`, `\"localwithoverrides`, `\"read\"`, or `\"write`.\n",
        ],
        fields: [],
    },
    PartialType {
        ident: "EnvConfig",
        docs: [
            " Allows the user to set or override the local process' environment variables with the ones\n",
            " from the remote pod.\n",
            "\n",
            " Which environment variables to load from the remote pod are controlled by setting either\n",
            " [`include`](#feature-env-include) or [`exclude`](#feature-env-exclude).\n",
            "\n",
            " See the environment variables [reference](https://mirrord.dev/docs/reference/env/) for more details.\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"feature\": {\n",
            "     \"env\": {\n",
            "       \"include\": \"DATABASE_USER;PUBLIC_ENV\",\n",
            "       \"exclude\": \"DATABASE_PASSWORD;SECRET_ENV\",\n",
            "       \"override\": {\n",
            "         \"DATABASE_CONNECTION\": \"db://localhost:7777/my-db\",\n",
            "         \"LOCAL_BEAR\": \"panda\"\n",
            "       }\n",
            "     }\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "include",
                ty: "String",
                docs: [
                    " ### feature.env.include {#feature-env-include}\n",
                    "\n",
                    " Include only these remote environment variables in the local process.\n",
                    "\n",
                    " Value is a list separated by \";\".\n",
                    "\n",
                    " Some environment variables are excluded by default (`PATH` for example), including these\n",
                    " requires specifying them with `include`\n",
                ],
            },
            PartialField {
                ident: "exclude",
                ty: "String",
                docs: [
                    " ### feature.env.exclude {#feature-env-exclude}\n",
                    "\n",
                    " Include the remote environment variables in the local process that are **NOT** specified by\n",
                    " this option.\n",
                    "\n",
                    " Some of the variables that are excluded by default:\n",
                    " `PATH`, `HOME`, `HOMEPATH`, `CLASSPATH`, `JAVA_EXE`, `JAVA_HOME`, `PYTHONPATH`.\n",
                    "\n",
                    " Value is a list separated by \";\".\n",
                ],
            },
            PartialField {
                ident: "overrides",
                ty: "String",
                docs: [
                    " ### feature.env.override {#feature-env-override}\n",
                    "\n",
                    " Allows setting or overriding environment variables (locally) with a custom value.\n",
                    "\n",
                    " For example, if the remote pod has an environment variable `REGION=1`, but this is an\n",
                    " undesirable value, it's possible to use `overrides` to set `REGION=2` (locally) instead.\n",
                ],
            },
        ],
    },
    PartialType {
        ident: "AgentConfig",
        docs: [
            "\n",
            " Configuration for the mirrord-agent pod that is spawned in the Kubernetes cluster.\n",
            "\n",
            " We provide sane defaults for this option, so you don't have to set up anything here.\n",
            "\n",
            " ```json\n",
            " {\n",
            "   \"agent\": {\n",
            "     \"log_level\": \"info\",\n",
            "     \"namespace\": \"default\",\n",
            "     \"image\": \"ghcr.io/metalbear-co/mirrord:latest\",\n",
            "     \"image_pull_policy\": \"IfNotPresent\",\n",
            "     \"image_pull_secrets\": [ { \"secret-key\": \"secret\" } ],\n",
            "     \"ttl\": 30,\n",
            "     \"ephemeral\": false,\n",
            "     \"communication_timeout\": 30,\n",
            "     \"startup_timeout\": 360,\n",
            "     \"network_interface\": \"eth0\",\n",
            "     \"pause\": false,\n",
            "     \"flush_connections\": false,\n",
            "   }\n",
            " }\n",
            " ```\n",
        ],
        fields: [
            PartialField {
                ident: "communication_timeout",
                ty: "u16",
                docs: [
                    " ### agent.communication_timeout {#agent-communication_timeout}\n",
                    "\n",
                    " Controls how long the agent lives when there are no connections.\n",
                    "\n",
                    " Each connection has its own heartbeat mechanism, so even if the local application has no\n",
                    " messages, the agent stays alive until there are no more heartbeat messages.\n",
                ],
            },
            PartialField {
                ident: "ttl",
                ty: "u16",
                docs: [
                    " ### agent.ttl {#agent-ttl}\n",
                    "\n",
                    " Controls how long the agent pod persists for after the agent exits (in seconds).\n",
                    "\n",
                    " Can be useful for collecting logs.\n",
                    "\n",
                    " Defaults to `1`.\n",
                ],
            },
            PartialField {
                ident: "startup_timeout",
                ty: "u64",
                docs: [
                    " ### agent.startup_timeout {#agent-startup_timeout}\n",
                    "\n",
                    " Controls how long to wait for the agent to finish initialization.\n",
                    "\n",
                    " If initialization takes longer than this value, mirrord exits.\n",
                    "\n",
                    " Defaults to `60`.\n",
                ],
            },
            PartialField {
                ident: "flush_connections",
                ty: "bool",
                docs: [
                    " ### agent.flush_connections {#agent-flush_connections}\n",
                    "\n",
                    " Flushes existing connections when starting to steal, might fix issues where connections\n",
                    " aren't stolen (due to being already established)\n",
                    "\n",
                    " Defaults to `true`.\n",
                ],
            },
            PartialField {
                ident: "test_error",
                ty: "bool",
                docs: [
                    " <!--${internal}-->\n",
                    " Create an agent that returns an error after accepting the first client. For testing\n",
                    " purposes. Only supported with job agents (not with ephemeral agents).\n",
                ],
            },
            PartialField {
                ident: "ephemeral",
                ty: "bool",
                docs: [
                    " ### agent.ephemeral {#agent-ephemeral}\n",
                    "\n",
                    " Runs the agent as an\n",
                    " [ephemeral container](https://kubernetes.io/docs/concepts/workloads/pods/ephemeral-containers/)\n",
                    "\n",
                    " Defaults to `false`.\n",
                ],
            },
            PartialField {
                ident: "network_interface",
                ty: "String",
                docs: [
                    " ### agent.network_interface {#agent-network_interface}\n",
                    "\n",
                    " Which network interface to use for mirroring.\n",
                    "\n",
                    " The default behavior is try to access the internet and use that interface. If that fails\n",
                    " it uses `eth0`.\n",
                ],
            },
            PartialField {
                ident: "namespace",
                ty: "String",
                docs: [
                    " ### agent.namespace {#agent-namespace}\n",
                    "\n",
                    " Namespace where the agent shall live.\n",
                    "\n",
                    " Defaults to the current kubernetes namespace.\n",
                ],
            },
            PartialField {
                ident: "image_pull_policy",
                ty: "String",
                docs: [
                    " ### agent.image_pull_policy {#agent-image_pull_policy}\n",
                    "\n",
                    " Controls when a new agent image is downloaded.\n",
                    "\n",
                    " Supports `\"IfNotPresent\"`, `\"Always\"`, `\"Never\"`, or any valid kubernetes\n",
                    " [image pull policy](https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy)\n",
                    "\n",
                    " Defaults to `\"IfNotPresent\"`\n",
                ],
            },
            PartialField {
                ident: "image_pull_secrets",
                ty: "String",
                docs: [
                    " ### agent.image_pull_secrets {#agent-image_pull_secrets}\n",
                    "\n",
                    " List of secrets the agent pod has access to.\n",
                    "\n",
                    " Takes an array of hash with the format `{ name: <secret-name> }`.\n",
                    "\n",
                    " Read more [here](https://kubernetes.io/docs/concepts/containers/images/).\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "   \"agent\": {\n",
                    "     \"image_pull_secrets\": [\n",
                    "       { \"very-secret\": \"secret-key\" },\n",
                    "       { \"very-secret\": \"keep-your-secrets\" }\n",
                    "     ]\n",
                    "   }\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "image",
                ty: "String",
                docs: [
                    " ### agent.image {#agent-image}\n",
                    "\n",
                    " Name of the agent's docker image.\n",
                    "\n",
                    " Useful when a custom build of mirrord-agent is required, or when using an internal\n",
                    " registry.\n",
                    "\n",
                    " Defaults to the latest stable image `\"ghcr.io/metalbear-co/mirrord:latest\"`.\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "   \"agent\": {\n",
                    "     \"image\": \"internal.repo/images/mirrord:latest\"\n",
                    "   }\n",
                    " }\n",
                    " ```\n",
                ],
            },
            PartialField {
                ident: "log_level",
                ty: "String",
                docs: [
                    " ### agent.log_level {#agent-log_level}\n",
                    "\n",
                    " Log level for the agent.\n",
                    "\n",
                    "\n",
                    " Supports `\"trace\"`, `\"debug\"`, `\"info\"`, `\"warn\"`, `\"error\"`, or any string that would work\n",
                    " with `RUST_LOG`.\n",
                    "\n",
                    " ```json\n",
                    " {\n",
                    "   \"agent\": {\n",
                    "     \"log_level\": \"mirrord=debug,warn\"\n",
                    "   }\n",
                    " }\n",
                    " ```\n",
                ],
            },
        ],
    },
}