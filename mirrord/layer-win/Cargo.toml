[package]
name = "layer-win"
version.workspace = true
edition.workspace = true
license.workspace = true
readme.workspace = true
repository.workspace = true
documentation.workspace = true
authors.workspace = true
description.workspace = true
homepage.workspace = true
publish.workspace = true
keywords.workspace = true
categories.workspace = true

[lib]
crate-type = ["cdylib"]

[dependencies]
mirrord-layer-lib = { path = "../layer-lib" }
mirrord-protocol = { path = "../protocol" }
mirrord-intproxy-protocol = { path = "../intproxy/protocol", features = ["codec"] }
winapi = { version = "0.3.9", features = ["minwindef", "winnt", "consoleapi", "libloaderapi", "fileapi", "winsock2", "ws2tcpip", "ws2def", "ws2ipdef", "debugapi", "processthreadsapi", "errhandlingapi", "sysinfoapi", "synchapi", "handleapi", "processenv", "timezoneapi"] }
windows-strings = { version = "0.4" }

# Used for internal error type set-up
thiserror = "2.0.12" 

# Used for handling all kind of error types in practice
anyhow = "1.0.98" 

# Used for logging and tracing
tracing = "0.1"

str-win = { path = "../str-win" }

mirrord-config = { path = "../config" }

minhook-detours-rs = "0.2.0"
libc = "0.2.175"
phnt = "0.1.2"

# Additional dependencies for proxy connection
tokio = { version = "1", features = ["sync", "time"] }
bincode = "1.3"
tokio-util = { version = "0.7", features = ["codec"] }
once_cell = "1.21.3"

[lints]
workspace = true
