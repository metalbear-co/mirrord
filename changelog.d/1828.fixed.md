Fixed wrong errno being set by mirrord, fixing various flows that rely on errno even when return code is ok